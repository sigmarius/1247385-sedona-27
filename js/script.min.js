var link=document.querySelector(".js-link"),form=document.querySelector(".js-form"),arrivalDate=form.querySelector("[name=arrival-date]"),livingDate=form.querySelector("[name=living-date]"),adultsAmount=form.querySelector("[name=adults-amount]"),kidsAmount=form.querySelector("[name=kids-amount]"),isStorageSupport=!0,adults="",kids="",codeEscape=27,onLinkClick=function(e){e.preventDefault(),form.classList.toggle("modal-hidden"),form.classList.remove("modal-error"),arrivalDate.focus(),adults&&kids&&(adultsAmount.value=adults,kidsAmount.value=kids)},onSubmitClick=function(e){arrivalDate.value&&livingDate.value?isStorageSupport&&(localStorage.setItem("adults",adultsAmount.value),localStorage.setItem("kids",kidsAmount.value)):(e.preventDefault(),form.classList.remove("modal-error"),form.offsetWidth=form.offsetWidth,form.classList.add("modal-error"))},onEscapeClick=function(e){e.keyCode===codeEscape&&(e.preventDefault(),form.classList.contains("modal-hidden")||(form.classList.add("modal-hidden"),form.classList.remove("modal-error")))},onDocumentReady=function(e){e.preventDefault(),form.classList.add("modal-hidden")};try{adults=localStorage.getItem("adults"),kids=localStorage.getItem("kids")}catch(e){isStorageSupport=!1}"loading"===document.readyState&&document.addEventListener("DOMContentLoaded",onDocumentReady),link.addEventListener("click",onLinkClick),form.addEventListener("submit",onSubmitClick),window.addEventListener("keydown",onEscapeClick);