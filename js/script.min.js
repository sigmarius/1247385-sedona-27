var link=document.querySelector(".search-header"),form=document.querySelector(".search-form"),arrivalDate=form.querySelector("[name=arrival-date]"),livingDate=form.querySelector("[name=living-date]"),adultsAmount=form.querySelector("[name=adults-amount]"),kidsAmount=form.querySelector("[name=kids-amount]"),isStorageSupport=!0,adults="",kids="";try{adults=localStorage.getItem("adults"),kids=localStorage.getItem("kids")}catch(e){isStorageSupport=!1}window.addEventListener("load",function(e){e.preventDefault(),form.classList.add("modal")}),link.addEventListener("click",function(e){e.preventDefault(),form.classList.toggle("modal"),form.classList.remove("modal-error"),arrivalDate.focus(),adults&&kids&&(adultsAmount.value=adults,kidsAmount.value=kids)}),form.addEventListener("submit",function(e){arrivalDate.value&&livingDate.value?isStorageSupport&&(localStorage.setItem("adults",adultsAmount.value),localStorage.setItem("kids",kidsAmount.value)):(e.preventDefault(),form.classList.remove("modal-error"),form.offsetWidth=form.offsetWidth,form.classList.add("modal-error"))}),window.addEventListener("keydown",function(e){27===e.keyCode&&(e.preventDefault(),form.classList.contains("modal")||(form.classList.add("modal"),form.classList.remove("modal-error")))});